# 光栅化
## 视口变换
从$[-1,1]^3$的标准化设备空间变化到视口的宽高
$$
M_{viewport}=
\begin{bmatrix}
\frac{width}{2} & 0 & 0 & \frac{width}{2}\\
0 & \frac{height}{2}& 0 & \frac{height}{2}\\
0 & 0 & 1 & 0\\
0 & 0 & 0 & 1
\end{bmatrix}
$$
相当于把x、y轴拉伸、平移到视口的大小（即$[0,width]\times [0,height]$），z轴不动

## 光栅化采样
对每个像素依次判断是否在每个三角形内
对于每个三角形，可以只判断三角形的包围区域（AABB），而非遍历整个屏幕

## 实际光栅化方法
运用活化边表的绘制区域的方法等

## 深度处理
### 画家算法
先画远处的物体，再画进处的物体，不断重写帧缓存（以三角形为单位，不需要额外的缓存）
由于三角形间的深度关系比较复杂，画家算法容易得出错误的结果

### Z-Buffering
开一个深度缓冲区，记录每一个像素的最小深度，每次处理对应像素时判断深度来决定覆盖关系。
深度总为正值，深度越小离摄像机更近（由于相机在原点）
Z-Buffering在光栅化的过程中同时生成同步的深度缓冲