# 动画压缩
## 原理
在实际情况下，大量的动画数据是冗余的。例如缩放和位移的数据大部分时间并不胡发生改变
## 关键帧
### 算法
对于一个连续的参数序列，定义一个阈值，每次沿着一个很小的时间步长检测，如果当前的参数与上一个关键帧的参数插值不超过阈值，就跳过；如果超过阈值，就添加一个新的关键帧。这个算法将将一个参数序列处理成为一个由关键帧组成的序列，减少空间占用。
### 特点
关键帧的数目取决于信号的奇异性
### 改进
利用Catmoon-Rom算法生成关键帧之间的新动画曲线，而非使用线性插值
## 定点数表示浮点数
+ 当浮点数的范围大致能够确定时，可以用定点数来进行模拟
+ 先将数字范围归一化到$[0,1]$，再用bit来表示这个区间的数字，精度可以达到$\frac{1}{2^n}$
## 四元数数据压缩
+ 归一化的四元数每一个分量值在$[-1,1]$之间，但四个分量中有三个一定在$[-\frac{1}{\sqrt{2}},\frac{1}{\sqrt{2}}]$之间，而归一化的四元数已知三个分量可以推出最后一个分量
+ 工业上用6个字节来存储四元数:
	+ 最高位为预留位
	+ 46-45位存储哪一个分量被忽略了
	+ 剩下的0-44位依次存储未被忽略的分量值：每15个bit存储一个分量
## 压缩带来的问题
+ 压缩带来的误差会随着骨骼的父子关系由父向子依次传递放大，最后造成位于骨骼末端的武器等发生抖动
+ 误差补偿：末端的骨骼进行一些补偿，会产生高频数据