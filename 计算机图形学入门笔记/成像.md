# 成像

## 一些概念
### FOV
视场角，决定FOV的为焦距（传感器与小孔的距离）和传感器的大小，其中传感器大小为恒定的值，焦距可变

相机焦距的定义是以传感器大小为35mm胶片（36mmx24mm）为基准，视场角可以由焦距计算而来，不同的设备折算到35mm胶片大小来计算
### Exposure（曝光度）
曝光度为曝光时间与Irradiance的乘积（或者Irradiance队时间的积分）
$$
H=T\times E
$$
决定曝光度的因素：
+ 光圈大小(Aperture Size)：模拟人的瞳孔设计，光圈越大，Irradience越大。光圈大小用一个叫F数的参数来描述，F数大小与光圈的直径成反比
+ 快门开放时间(Shutter Speed)：决定了曝光时间，即传感器接受光线的时间。快门开放时间过长（或者物体运动过快）会造成动态模糊，也就是在快门开放的时间内物体发生了位移，造成了成像的模糊
+ 感光度(ISO gain)：类似于后处理，描述了传感器对于光线的敏感程度，相当于对每个采集到的像素点乘上某个数。ISO越大，信号越大，伴随着噪声也越大

快门时间慢，调高光圈可以保持曝光度的平衡，比如高速摄影机技术就是大光圈与高速快门实现的，低速摄影则是反过来

## 针孔相机
利用小孔成像原理，将场景光线倒置打到传感器上，得到了一个没有虚化的（锐利的）图像

## 镜头
单纯的针孔相机拍不出景深，需要用棱镜来模拟人眼的结构。
### 薄透镜
透镜组的理想模型，无限薄的一片透镜，总是将光线折射到一个点上，且焦距可以动态改变
薄透镜满足一个性质：
$$
\begin{matrix}
\frac{1}{f}=\frac{1}{z_i}+\frac{1}{z_o}\\
z_i:像距\\
z_o物距\\
f:焦距
\end{matrix}
$$
### Defocus Blur
Circle of Confusion：一个不在距透镜距离不为焦距的点由于光现在到达感光平面之前已经相交，在感光平面上会产生一个圆，这个圆就为CoC
$$
\begin{matrix}
C=A\cdot\frac{|z_s-z_i|}{z_i}\\
z_s:感光平面与透镜的距离\\
z_i:像距\\
A:透镜(或光圈)的直径\\
C:CoC的直径
\end{matrix}
$$
由上可知，光圈越大，图像越模糊
F数的精确定义为：焦距/光圈直径

### 景深
使得CoC在一个指定的范围内（成像结果足够锐利）的场景深度

## 光线追踪中的透镜
原来的光线追踪算法默认为小孔成像的模型，生成的是精确的图像，可以使用一个虚拟的透镜放在光线发出的像素之前，运用透镜的公式来计算其折射的光线方向，再进行光线追踪